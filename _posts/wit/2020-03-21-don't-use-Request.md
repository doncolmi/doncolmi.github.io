---
layout: post
title: [번역글] npm Request 의 개발 중단이 된 이유
date: 2020-03-12 10:44:00 +0000
description: hello
img: ./wit/2020-03-21-don't-use-Request/2.png
tags: [What_did_i_do_it]
---

Node.js 크롤링 관련글을 올리려 했을 정리할 때, 내 크롤링 예제는 request를 이용하여 해당 사이트의 HTML을 가져왔었다. (현재 수정된 예제는 axios 를 사용하고 있다.) 아마 어떤 이유였는지는 까먹었으나 npm 사이트에 가서 request를 검색해보니 내가 원하는 결과가 나오질 않았다.

<center><img src="/assets/img/wit/2020-03-21-don't-use-Request/1.png"></center>
<center><small>오타 없이 정확히 이름을 검색했는데도 결과에 나오지 않는다.</small></center>

그래서 주소창에 직접 request 저장소를 쳐저 들어가봤다.

<center><img src="/assets/img/wit/2020-03-21-don't-use-Request/2.png"></center>

이런식으로 맨 위에 경고가 떴다. 영어가 약한 나로써는 단어 하나하나 찾으며 뜻을 알아보려 노력했다. 그래서 나온 결과는 대충 **"이 패키지는 더 이상 사용되지 않아."** 이다.

<center><img src="/assets/img/wit/2020-03-21-don't-use-Request/3.png"></center>
<center><small>암튼 그렇다네요.</small></center>

왜 그런가 했더니 [이 링크](https://github.com/request/request/issues/3142)를 참고하라고 한다. 들어가 보니 깃허브의 이슈가 나온다. 평소에 영어 공부를 어떻게 할까 생각중이던 찰나에 이 깃허브를 번역해서 블로그에 올리기로 했다.

깃허브 이슈의 모든 내용을 번역하지 않고, 제가 생각하기에 중요하다고 생각하는(특히 개발자이신 mikeal님) 부분만 번역했습니다. 그리고 영어를 진짜 못해서...번역이 깔끔하지 않고 보셨을 때 의아해 하실 부분이 있을 수도 있어 따로 번역하면서 제 생각을 문단 뒤에 적어두었습니다.

참고로 파파고의 힘을 ~~매우~~ 많이 빌렸습니다.

### 깃허브 번역

---

# Request의 요청의 과거, 현재 및 미래 # 3412

***Mikeal(Request 제작자)* :**  자세한 사항과 추론들을 설명하기 전 요점부터 말하겠다. 자바스크립트 생태계를 위해 Request가 할 수 있는 가장 중요한 일은 새로운 기능이나 주요 기능 고려를 그만 두는 것이다.

먼저 Request를 개선하기 위해 최선을 다해 Request에 기여해준 모든 이들(committers) 에게 사과를 올린다. 하지만 개발을 중단하는 것이 최선이다.

**"하지만 개발을 중단하는 것이 최선이다."**
이 문장은 본문에서 "but it’s for the best." 입니다. 저는 여기서 it's를 위에서 새로운 기능, 주요 기능을 고려한다는 부분을 가리킨다고 생각했고, 또 새로운 기능, 주요 기능을 고려한다는 것을 개발이라고 생각했습니다. 
저는 위 두 문단의 의미를 결국 Request에 기여한 모든 이들에게 사과하고 더 이상 이 모듈에 대한 개발을 접어야 하는게 최선이다 라고 생각했습니다.

### 2009년

---

Request의 첫 번째 버전은 Node.js 생태계를 위해 만들어진 첫 모듈들 중의 하나였습니다. 초기 버전은 표준 콜백 인터페이스, 스트림, node_modules 및 npm을 미리 날짜로 지정하는 API에 작성되었습니다. 처음 몇 년 동안, Request와 Node.js는 서로가 서로에게 배워가며 성장했습니다.

Node.js가 코어 인터페이스를 개선하고 마이그레이션 함에 따라 요청 또한 개선되었습니다.

요청 시에 코어 http 라이브러리와 스트림에 대한 변경사항을 채택하여 ["Pipe"](https://riptutorial.com/ko/node-js/example/20737/%ED%8C%8C%EC%9D%B4%ED%94%84-%EC%8A%A4%ED%8A%B8%EB%A6%BC)의 이벤트(Request의 한줄 프록시를 사용 가능한)와 코어 http의 여러 재기록(필기 해야 했던 것) 같은 개선 사항도 알렸었습니다.

**여기서 Request에 대한 단어가 많이 나왔습니다.**
앞으로의 문단들 또한 그럴 것 이지만 Request가 자주 나왔습니다.

<center><img src="/assets/img/wit/2020-03-21-don't-use-Request/4.png"></center>

거기다가 위 사진을 보시면 마크가 된 request가 있고 아닌 request가 있습니다. 저는 여기서 마크 처리된 request를 현재 저희가 다루는 모듈인 Request로 보았고, 마크 처리가 안된 request들은 순수하게 "요청"이라는 뜻으로 접근했습니다.

### npm

---

Request는 npm에 추가된 최초의 모듈 중 하나입니다. npm의 성장하자 Request에 대한 의존도 또한 증가했습니다. npm이 백엔드 보다 프론트엔드 작업에 훨씬 더 많이 사용이 될 때, Request는 레지스트리에서 가장 의존적인 모듈 중 하나로 남아있습니다. 이 글을 쓰는 지금도, Request는 1400만번 다운로드가 되고 4만 1천개의 모듈이 Request에 의존하고 있습니다.

Node.js 생태계에서 Request의 위치는 더 이상 혁신자(개척자)가 아닙니다. 당신이 Node.js에서 HTTP를 사용하는 방법을 구글에 검색한다면 예제로 클라이언트에선 Request를 서버로는 Express를 보여줄 것입니다. **이런 현상은 두드러지게 두 가지의 나쁜 영향을 보여줍니다.**

우리(Request)가 생태계를 지배하고 있어 우리와 비슷한 업무(Node.js에서 HTTP를 사용하는)를 수행하는 새로운 라이브러리가 다른 프로젝트에서 채택 되기 힘들어집니다. 그리고 Request를 의존하는 대부분의 모듈이나 프로젝트들이 중요한 변경사항을 채택하지 않아 수천 개의 블로그 게시물이나 스택 오버플로의 응답이 일치하지  않는다.

**번역을 못하겠어요...**
아무튼 무슨 뜻 인지는 알겠지만 마지막 문장은 정말 번역하기 힘들었습니다. (단순히 제가 멍청하기 때문에 그렇습니다.) 대충 이번 문단은 Request는 HTTP를 사용하는 Node.js의 모듈에서 제일 유명하고 널리 쓰였기 때문에 두가지 문제가 발생했다고 합니다.
첫 번째로는 **자신들이 생태계를 독점하고 있어 자신들과 비슷한 기능을 하는 Module들이 생겨도 외면받는다는 것**.
그리고 Request를 의존하는 대부분의 모듈과 프로젝트들이 **중요한 변경사항(아마 메이저 업데이트 등을 의미하는거 같습니다.)을 적용하지 않았기**에 HTTP를 사용할 때 **각각의 요청에 따라 각각 다른 결과가 나온다**. 그에 따라 블로그 게시물이나 스택 오버플로등에서 가지각색의 답변이 나오는게 문제랍니다.

### 모던 자바스크립트

---

최근 몇 년동안 자바스크립트 극적인 사건이었다. 사람들이 몇 년 동안 자바스크립트에 대해 이야기한 특징들은 대부분의 환경에서 안정적으로 의존할 수 있는 기능들, 표준 그리고 특징들에 이르기까지 다양했다.

그들이 이야기한 특징들이 채택된 속도는 놀라울 정도로 빠르다. 이것은 대부분 자동으로 업데이트 되는 브라우저들과 아주 빠른속도로 출시되는 Node.js의 일정 덕분이다.

Request의 코어 패턴은 시대에 뒤떨어져 있다. 이런 평가에 대해 몇몇 사람들은 논쟁 할 수 있고, 나 또한 그들이 누구인지 알고 있기에 놀라진 않는다. 중요한건 그 평가가 사실이라는 것이다.

*나는 종종 기능 중 일부가 Node.js의 최신 릴리즈에서만 제공되고 나서 얼마 되지 않아 모조리 채택해야할 영향에 대해 회의적이었습니다. ( 이 부분에 대한 해석이 정확하지 않습니다. 죄송합니다. )*

현재 생태계에서 이런 패턴으로의 전환이 일어나고 있다. 그것이 얼마나 골치 아플지 아직 알 수 없다. 나는 미래를 점치거나 미래가 어떻게 보이는지 알아내려고 노력하지 않을 것이다. Request에 대한 질문은 "Request는 전환(위 패턴들)을 통해 살아남기 위해 노력해야 하는가?" 이다.

**1년 전만해도 대답은 뻔했고 우리 또한 그렇게 할 줄(살아남기 위해 전환해야 한다.)알았지만, 지금은 그 반대라는 것을 확신하게 되었다.**

**또 번역을 못한부분이 있습니다...**
죄송합니다. 빡대가리라서 그렇습니다. 아무튼 현재 Request는 빠르게 변하는 Node.js의 생태계에 맞춰가야 하는가? 라는 질문에 당연하게도 Yes라고 생각했지만 현재(저 글을 쓰셨을 때) Request를 개발하는 분들은 No라고 생각한다고 합니다.
또한 재미있는 표현이 나왔습니다. **"read the tea leaves"** 라는 표현이 나왔는데요. 이는 차 잎을 읽는다가 아닌, **"(미래를) 점치다"라는 뜻**을 가지고 있다고 합니다.
아직 모던 자바스크립트의 문단이 끝나지 않았습니다. 아래 계속 내용을 이어가겠습니다.

위에서 말한 패턴(새로운 언어 패턴)을 진정으로 수용하기 위해 쓰여진 Request는 사실상 새로운 모듈이 되었습니다. 나는 이미 이 공간을 조금 탐험했었고 꽤 만족스러운 프로젝트를 가지고 있지만 그것은 생각할 수 있는 모든 면에서의 Request와 양립할 수 없습니다.

**이전 패턴과 양립할 수 없으며 새로운 패턴을 완전히 수용하지 못하는 Request는 과연 어떤 가치가 있을까요?**

**새로운 개발자들에 의해 쓰여진 새로운 모듈들은 전 세계가 이러한 패턴들을 염두에 두고 이러한 문제들에 대해 재고하고 있을 때 부분적으로만 호환되는 것이 무슨 의미가 있을까요?**

새 모듈들을 위해 가장 좋은 것은 Request가 서서히 사라져서 결국 유산의 더미가 되어 또 다른 기억으로 남는 것입니다.

Request가 현재 가지고 있는 위치를 가지고 차세대 개발자 중 더 큰 지분을 위해 그것을 이용하는 것은, Request의 이력을 부담하지 않는 더 나은 모듈로부터 그들을 쫓아낼 것이기에 그러한 개발자들에겐 해가 될 것이다.

### 유지보수 모드(Maintenance Mode)

---

아래 계획들이 있다.

- Request의 새로운 기능 개발을 중단합니다.
- Request의 주요 변경을 고려하는 것을 중단합니다.
- 여전히 활동하는 기여자(committers)들은 시기적절하게 자신들의 수정안을 Merge하려고 할 것입니다. 하지만 약속은 없습니다.
- 릴리즈는 완전 자동화되며 마스터로의 합병은 모두 발행될 것입니다. 나는 GitHub Actions를 사용하는 다른 프로젝트들을 위해 이미 만들었습니다.
    - 우리는 비활동적인 협력자를 제거하고 2fa를 집행해야 한다. 왜냐면 커밋 권리는 npm 출판권이 될 것이기 때문이다.( 솔직히 이 부분은 뭐라는지 모르겠어서 그냥 파파고 그대로 적었습니다. )

**이렇게 개발자가 쓴 이슈 본문이 해석이 끝났습니다.**
이 것은 완벽하게 번역되지 않아 완전한 개발자의 의도가 아닙니다. 정확한 개발자의 발언들은 [이 링크](https://github.com/request/request/issues/3142)를 통해 볼 수 있습니다.

**결국 Request는 자신들이 Node.js 생태계에서 HTTP 통신하는 모듈쪽을 의도치 않게 독점하고 있었습니다. 그리고 빠르게 변화하는 Node.js를 따라가려하다보니 본래의 Request가 아닌 아예 다른 모듈이 되가는걸 느꼈고 결국은 Request의 모듈은 더 이상의 개발은 없을 것이라는 내용의 이슈였습니다.**

이제 아래는 이슈에 달린 코멘트들입니다.

***reconbot :*** 나는 이 말을 전적으로 동의해. 나는 경고 메세지및(또는) 새로운 릴리스에 대한 사용 중지가 적법하다고 생각해. 바뀐 프로세스와 가이드라인에 대해서 말하자면, 난 일을 더 쉽게 할 수 있게 되었어.

***simov : mikeal***은 아주 잘 말했어, 나는 더 넓은 시야를 확보하기 위해 이 이슈를 pinned 해놓겠어.

analog-nico : 말이 되네! 나는 이 정책을 `request-promise`(또 다른 모듈입니다. 이 게시글의 맨 위에 있는 검색결과 사진에도 있습니다.)를 위해 천천히 채택할 것이다. Node.js 생태계에 대한 기여에 감사해.

### 마무리

---

암튼 코멘트들은 이렇고 다른 흥미로운 내용으로는 npm을 통해서 공식적으로 WARN 마크가 뜨면서 경고가 나오고 있다. 이 정책이 과도한 공황상태를 불러왔다고 생각한다 등등 다양한 의견들이 있었습니다.

영어 공부를 진짜 평소에 1도 안할 뿐더러 이런 해외 이슈 번역은 처음이기에 미숙한 부분이 많습니다.~~전부 미숙합니다.~~

글 봐주셔서 감사합니다. 내용에 대한 지적은 댓글이나 이메일로 부탁드립니다.
<center><img src="/assets/img/wit/2020-03-21-don't-use-Request/5.gif"></center>